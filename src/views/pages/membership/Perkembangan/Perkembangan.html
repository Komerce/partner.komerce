<section id="cod-data-partner-detail" class="growth">
  <div v-if="!loadDataAwal">
    <b-card no-body>
      <div class="growth__container">
        <div class="d-flex align-items-center">
          <h4 class="growth__title">Perkembangan Partner</h4>
        </div>
        <div class="d-flex justify-content-end align-items-center mb-1">
          <div class="d-flex justify-content-end mr-1">
            <date-range-picker
              ref="picker"
              v-model="rangeDate"
              :locale-data="locale"
              :ranges="ranges"
              :opens="'left'"
              class="w-100 growth__datepicker"
            >
              <template
                v-slot:input="picker"
                style="min-width: 350px"
              >
                <div
                  class="d-flex justify-content-between align-items-center"
                >
                  <span
                    class="mr-2"
                  >{{ formatDate(picker.startDate) }} -
                    {{ formatDate(picker.endDate) }}</span>
                  <svg
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <path
                      d="M8 2V5"
                      stroke="#222222"
                      stroke-width="1.5"
                      stroke-miterlimit="10"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M16 2V5"
                      stroke="#222222"
                      stroke-width="1.5"
                      stroke-miterlimit="10"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M3.5 9.08984H20.5"
                      stroke="#222222"
                      stroke-width="1.5"
                      stroke-miterlimit="10"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M21 8.5V17C21 20 19.5 22 16 22H8C4.5 22 3 20 3 17V8.5C3 5.5 4.5 3.5 8 3.5H16C19.5 3.5 21 5.5 21 8.5Z"
                      stroke="#222222"
                      stroke-width="1.5"
                      stroke-miterlimit="10"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M15.6947 13.7002H15.7037"
                      stroke="#222222"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M15.6947 16.7002H15.7037"
                      stroke="#222222"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M11.9955 13.7002H12.0045"
                      stroke="#222222"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M11.9955 16.7002H12.0045"
                      stroke="#222222"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M8.29431 13.7002H8.30329"
                      stroke="#222222"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                    <path
                      d="M8.29431 16.7002H8.30329"
                      stroke="#222222"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    />
                  </svg>
                </div>
              </template>
            </date-range-picker>
          </div>
          <div class="d-flex justify-content-end">
            <!-- filter -->
            <b-form-group class="mb-0">
              <b-input-group class="input-group-merge">
                <b-input-group-prepend is-text>
                  <feather-icon icon="SearchIcon" />
                </b-input-group-prepend>
                <b-form-input
                  id="filterSearch"
                  class="growth__inputsearch"
                  v-model="search"
                  type="search"
                  placeholder="Search"
                  debounce="500"
                  @input="onChangeSearch"
                />
              </b-input-group>
            </b-form-group>
          </div>
        </div>
        <b-table
          striped
          hover
          responsive
          :sticky-header="true"
          :per-page="0"
          style="max-width: 1260px; max-height: 55vh;"
          :current-page="currentPage"
          :items="filteredItems"
          :busy="isLoadTable"
          :fields="fields"
          :sort-by.sync="sortBy"
          :sort-desc.sync="sortDesc"
          :sort-direction="sortDirection"
          :filter="filter"
          :filter-included-fields="filterOn"
          @filtered="onFiltered"
        >
          <template #head()="scope">
            <div class="text-nowrap">
              {{ scope.label }}
            </div>
          </template>
          <template #cell(full_name)="data">
            <div class="tbl__fullnamecontent">
              <h5 class="text-black">{{ data.item.full_name }}</h5>
              <p class="text-black my-0">{{ data.item.email }}</p>
            </div>
          </template>
          <template #cell(no_hp)="data">
            <div class="d-flex justify-content-center align-items-center tbl__fullnamephone">
              <h5 class="text-black mb-0 mr-1">{{ data.item.no_hp ? data.item.no_hp : '-' }}</h5>
              <b-button
                v-show="data.item.no_hp"
                variant="link"
                size="sm"
                @click="handlePhone(data.item.no_hp, 'copy')"
                class="p-0 mr-1"
              >
                <span class="text-black">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M17 13.4V16.4C17 20.4 15.4 22 11.4 22H7.6C3.6 22 2 20.4 2 16.4V12.6C2 8.6 3.6 7 7.6 7H10.6" stroke="#222222" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M17.0001 13.4H13.8001C11.4001 13.4 10.6001 12.6 10.6001 10.2V7L17.0001 13.4Z" stroke="#222222" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M11.6001 2H15.6001" stroke="#222222" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M7 5C7 3.34 8.34 2 10 2H12.62" stroke="#222222" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M21.9999 8V14.19C21.9999 15.74 20.7399 17 19.1899 17" stroke="#222222" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M22 8H19C16.75 8 16 7.25 16 5V2L22 8Z" stroke="#222222" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </span>
              </b-button>
              <b-button
                v-show="data.item.no_hp"
                variant="link"
                size="sm"
                @click="handlePhone(data.item.no_hp, 'wa')"
                class="p-0"
              >
                <span class="text-black">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M0.0568848 24L1.74388 17.837C0.702885 16.033 0.155885 13.988 0.156885 11.891C0.159885 5.335 5.49488 0 12.0499 0C15.2309 0.001 18.2169 1.24 20.4629 3.488C22.7079 5.736 23.9439 8.724 23.9429 11.902C23.9399 18.459 18.6049 23.794 12.0499 23.794C10.0599 23.793 8.09888 23.294 6.36188 22.346L0.0568848 24ZM6.65388 20.193C8.32988 21.188 9.92988 21.784 12.0459 21.785C17.4939 21.785 21.9319 17.351 21.9349 11.9C21.9369 6.438 17.5199 2.01 12.0539 2.008C6.60188 2.008 2.16688 6.442 2.16488 11.892C2.16388 14.117 2.81588 15.783 3.91088 17.526L2.91188 21.174L6.65388 20.193ZM18.0409 14.729C17.9669 14.605 17.7689 14.531 17.4709 14.382C17.1739 14.233 15.7129 13.514 15.4399 13.415C15.1679 13.316 14.9699 13.266 14.7709 13.564C14.5729 13.861 14.0029 14.531 13.8299 14.729C13.6569 14.927 13.4829 14.952 13.1859 14.803C12.8889 14.654 11.9309 14.341 10.7959 13.328C9.91288 12.54 9.31588 11.567 9.14288 11.269C8.96988 10.972 9.12488 10.811 9.27288 10.663C9.40688 10.53 9.56988 10.316 9.71888 10.142C9.86988 9.97 9.91888 9.846 10.0189 9.647C10.1179 9.449 10.0689 9.275 9.99389 9.126C9.91889 8.978 9.32488 7.515 9.07788 6.92C8.83589 6.341 8.59089 6.419 8.40889 6.41L7.83888 6.4C7.64088 6.4 7.31888 6.474 7.04688 6.772C6.77488 7.07 6.00688 7.788 6.00688 9.251C6.00688 10.714 7.07188 12.127 7.21988 12.325C7.36888 12.523 9.31488 15.525 12.2959 16.812C13.0049 17.118 13.5589 17.301 13.9899 17.438C14.7019 17.664 15.3499 17.632 15.8619 17.556C16.4329 17.471 17.6199 16.837 17.8679 16.143C18.1159 15.448 18.1159 14.853 18.0409 14.729Z" fill="#14142B"/>
                  </svg>
                </span>
              </b-button>
            </div>
          </template>
          <template #cell(is_onboarding)="data">
            <span :class="{ 'text-success': data.item.is_onboarding === 1, 'text-danger': data.item.is_onboarding === 0 }">
              {{ checkDataStatusOnboarding(data.item.is_onboarding) }}
            </span>
          </template>
          <template #table-busy>
            <div class="text-center text-danger my-2">
              <b-spinner class="align-middle" />
              <strong> Loading...</strong>
            </div>
          </template>
        </b-table>
        <div class="d-flex justify-between mt-2">
          <div>
            <span class="text-black mr-1">List per halaman</span>
            <b-button
              v-for="page in pageOptions"
              :key="page"
              :variant="page === perPage ? 'primary' : 'light'"
              size="sm"
              class="btnPage text-black"
              @click="setperPage(page)"
            >
              {{ page }}
            </b-button>
          </div>
          <b-col
            cols=""
          >
            <b-pagination
              v-model="currentPage"
              :total-rows="totalRows"
              :per-page="perPage"
              align="right"
              size="sm"
              class="my-0"
              aria-controls="my-table"
            />
          </b-col>
        </div>
      </div>
    </b-card>
  </div>

  <div v-else class="text-center">
    <b-spinner variant="primary" label="Text Centered" />
  </div>
</section>