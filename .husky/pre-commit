#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo 'Styling, linting, formatting dan building project sebelum commit'
# Check Prettier standards
npm run format ||
(
    echo '
             Kesalahan saat mengecheck prettier. Jalankan manual yarn format or npm run format. Semoga berhasil slurrr ğŸ˜Š';
    false;
)

# add extend memory
export NODE_OPTIONS="--max-old-space-size=8192"

# Check ESLint Standards
npm run lint ||
(
        echo '
                Style kode anda tidak sesuai dengan aturan standart eslint kami. Silahkan perbaiki lagi kode kamu ya ğŸ˜Š'
        false; 
)

# If everything passes... Now we can commit
echo 'ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”... Oke... Coba kita build sekarang. ğŸ¤”ğŸ¤”ğŸ¤”ğŸ¤”'

npm run build ||
(
    echo 'âš™ï¸ğŸ”¨âŒUpsss.... Kesalahan saat build âš™ï¸ğŸ”¨âŒ
            Lihat apa yang membuat build nya gagal, lalu anda perbaiki lagiğŸ˜Š. 
    '
    false;
)

# If everything passes... Now we can commit
echo 'âœ…âœ…âœ…âœ… Yeyyyyy, commit anda sukses âœ…âœ…âœ…âœ…'
